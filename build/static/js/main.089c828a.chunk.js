(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{33:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},49:function(e,t,c){"use strict";c.r(t);var n,o,r,a,s,i=c(1),l=c.n(i),u=c(20),p=c.n(u),b=(c(33),c(2)),j=c(11),O=(c(37),c.p+"static/media/logo.4c9f4b4a.svg"),d=c.p+"static/media/title.63eef6e4.svg",h=(c(38),c(27)),v=c(13),y=c(19),f=c(12),m=c(15),x=c(5);!function(e){e[e.GRID_SIZE=8]="GRID_SIZE",e[e.HOUR=3600]="HOUR"}(n||(n={})),function(e){e.LOCAL_PVP="LOCAL_PVP",e.NETWORK_PVP="NETWORK_PVP",e.LOCAL_PVE="LOCAL_PVE"}(o||(o={})),function(e){e.EDIT_NAME="EDIT_NAME",e.SHOW_WINNER="SHOW_WINNER"}(r||(r={})),function(e){e.BLACK="#FFC533",e.WHITE="#E0ECF6"}(a||(a={})),function(e){e.HORSE="HORSE",e.KING="KING",e.ROOK="ROOK",e.BISHOP="BISHOP",e.QUEEN="QUEEN",e.PAWN="PAWN"}(s||(s={}));var C,N,A,E={H:{color:a.BLACK,type:s.HORSE},K:{color:a.BLACK,type:s.KING},R:{color:a.BLACK,type:s.ROOK},B:{color:a.BLACK,type:s.BISHOP},Q:{color:a.BLACK,type:s.QUEEN},P:{color:a.BLACK,type:s.PAWN}},g={h:{color:a.WHITE,type:s.HORSE},k:{color:a.WHITE,type:s.KING},r:{color:a.WHITE,type:s.ROOK},b:{color:a.WHITE,type:s.BISHOP},q:{color:a.WHITE,type:s.QUEEN},p:{color:a.WHITE,type:s.PAWN}};!function(e){e.MOVE="MOVE",e.CHANGE_NAME="CHANGE_NAME",e.START="START",e.GAME_OWER="GAME_OWER"}(C||(C={}));var P=E.B,k=E.H,I=E.K,R=E.Q,S=E.R,M=E.P,H=g.b,W=g.h,K=g.k,T=g.q,w=g.r,L=g.p,B={winner:null,time:3600,chosenFigure:null,currentMover:a.WHITE,gameStats:[],defeatedFigures:(N={},Object(f.a)(N,a.BLACK,[]),Object(f.a)(N,a.WHITE,[]),N),moves:(A={},Object(f.a)(A,a.BLACK,[]),Object(f.a)(A,a.WHITE,[]),A),grid:[[S,k,P,R,I,P,k,S],[M,M,M,M,M,M,M,M],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,I,0,0,0,0],[L,L,L,L,L,L,L,L],[w,W,H,T,K,H,W,w]]},G=Object(m.a)({name:"grid-state",initialState:B,reducers:{setTime:function(e,t){e.time=t.payload},setChosenFigure:function(e,t){t.payload.color===e.currentMover&&(e.chosenFigure=Object(y.a)(Object(y.a)({},t.payload),{},{position:Object(v.a)(t.payload.position)}))},figureMove:function(e,t){var c=Object(x.a)(e),n=c.grid,o=c.chosenFigure,r=c.defeatedFigures,s=c.time,i=a.WHITE,l=a.BLACK;if(o){var u=Object(h.a)(o.position,2),p=u[0],b=u[1],j=Object(h.a)(t.payload,2),O=j[0],d=j[1];n[d][O]!==I&&n[d][O]!==K||(e.winner=o.color);var f=n[b][p],m=n[d][O];e.grid[d][O]=f,e.grid[b][p]=0,m&&(e.defeatedFigures[f.color]=[].concat(Object(v.a)(r[f.color]),[Object(y.a)(Object(y.a)({},m),{},{position:[O,d],time:Date.now()})])),e.chosenFigure=null,e.currentMover=f.color===i?l:i,e.moves[o.color]=[].concat(Object(v.a)(e.moves[o.color]),[{prevPosition:[p,b],position:[O,d],color:f.color,time:3600-s,type:f.type}])}}}}),V=G.actions,F=V.setChosenFigure,_=V.figureMove,U=V.setTime,D=G.reducer;function z(e){var t=e%60,c=e/60%60;return"".concat(Math.trunc(c),":").concat(t<10?"0".concat(t):t)}var J=c(0);var Q=function(){var e=Object(b.c)((function(e){return e.userGrid.time})),t=Object(b.b)();return setTimeout((function(){e>=0&&t(U(e-1))}),1e3),Object(J.jsxs)("div",{className:"timer",children:[Object(J.jsx)("div",{children:"Round Time:"}),Object(J.jsx)("div",{children:3600===e?"60:00":z(e)})]})};var Y=function(){var e=Object(b.c)((function(e){return e.websockets.gameCycle})),t=Object(i.useMemo)((function(){return e?Object(J.jsx)(Q,{}):""}),[e]);return Object(J.jsxs)("div",{className:"header",children:[Object(J.jsxs)("div",{className:"logo-block",children:[Object(J.jsx)("img",{alt:"logo",className:"logo",src:O}),Object(J.jsx)("img",{alt:"title",className:"title",src:d})]}),t,Object(J.jsx)("div",{className:"admit-loss",children:"\u0442\u0430\u0439\u043c\u0435\u0440"}),Object(J.jsx)("div",{className:"toLobby",children:"\u043b\u043e\u0431\u0431\u0438"}),Object(J.jsx)(j.b,{to:"/Game",children:"Replay"}),Object(J.jsx)(j.b,{to:"/notGame",children:"To Lobby"})]})},Z=c(4),q=(c(42),{BISHOP:function(e){return Object(J.jsx)("path",{style:{fill:e},d:"M206.873,255.08h-3.41c2.214-3.337,8.32-14.536-0.712-25.6c-8.9-10.905-25.137-39.546-24.448-64.4h3.57 c4.418,0,7.667-3.582,7.667-8v-1c0-4.418-3.249-8-7.667-8h-4.333v-4.285c13-8.971,20.511-23.502,20.511-39.914 c0-10.332-7.011-26.11-15.819-41.721l-18.553,18.595c-3.111,3.111-8.182,3.111-11.294,0.001l-0.921-0.933 c-3.111-3.11-3.106-8.202,0.005-11.313l21.676-21.674c-4.444-7.069-8.869-13.678-12.703-19.224 c2.881-2.93,4.663-6.944,4.663-11.379C165.106,7.268,157.841,0,148.874,0c-8.967,0-16.234,7.268-16.234,16.233 c0,4.434,1.781,8.448,4.662,11.379c-14.585,21.101-37.94,57.587-37.94,76.269c0,16.853,8.178,31.724,21.178,40.625v3.574h-4.667 c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h3.571c0.689,24.855-15.547,53.495-24.448,64.4 c-9.031,11.064-2.926,22.263-0.712,25.6h-3.411c-4.418,0-8.333,3.582-8.333,8v9c0,4.078,3,7.438,7,7.931v17.069h118v-17.069 c4-0.493,7-3.853,7-7.931v-9C214.54,258.662,211.291,255.08,206.873,255.08z"})},PAWN:function(e){return Object(J.jsx)("path",{style:{fill:e},d:"M223.333,247h-5.926c2.607-3.811,10.798-18.024-0.727-32.248c-13.334-16.46-39.863-65.748-27.324-98.752h0.977 c4.418,0,7.667-3.582,7.667-8v-1c0-4.418-3.249-8-7.667-8h-1.225c10.917-10.466,17.725-25.184,17.725-41.5 c0-31.756-25.744-57.5-57.5-57.5s-57.5,25.744-57.5,57.5c0,16.316,6.808,31.034,17.725,41.5h-2.225c-4.418,0-8.333,3.582-8.333,8v1 c0,4.418,3.915,8,8.333,8h1.979c12.539,33.004-13.99,82.292-27.324,98.752c-11.524,14.224-3.334,28.437-0.727,32.248h-6.928 c-4.418,0-8.333,3.582-8.333,8v18c0,4.418,3.915,8,8.333,8H75v16h148v-16c5,0,8-3.582,8-8v-18C231,250.582,227.751,247,223.333,247 z"})},HORSE:function(e){return Object(J.jsx)("path",{style:{fill:e},d:"M210.952,116c14.912,0,27.037-12.088,27.037-27s-10.945-25.013-26.964-30.666c-11.333-4-18.018-10.823-23.009-19.412 C183.025,30.333,172.025,17,157.525,17c-5.832,0-19.798,0-19.798,0V0c-107,40.03-72.369,184-72.369,184h21.369v14h-6.369 c-4.418,0-8.631,3.582-8.631,8v1c0,3.289,2.302,6.111,5.14,7.341c-8.77,15.05-1.419,29.775,0.761,33.659h-5.271 c-4.418,0-8.631,3.582-8.631,8v18c0,4.418,4,8,8,8v16h132v-16.069c4-0.493,7-3.853,7-7.931v-18c0-4.418-2.951-8-7.369-8h-4.27 c2.181-3.884,8.902-18.609,0.13-33.659c2.838-1.23,4.508-4.052,4.508-7.341v-1c0-4.418-2.951-8-7.369-8h-7.631v-14h24.132 c-16.501-54-66.334-83-66.334-83h40.182C191.146,109.889,200.351,116,210.952,116z"})},KING:function(e){return Object(J.jsx)("path",{style:{fill:e},d:"M197.333,256h-1.641c1.878-3.337,7.061-14.536-0.605-25.6c-7.554-10.905-21.491-39.547-20.904-64.401 c4.409-0.01,7.816-3.587,7.816-7.999v-1c0-4.418-3.582-8-8-8c4.418,0,8-3.582,8-8v-1c0-4.418-3.249-8-7.667-8h-3.55 c-1.006-16.142,1.307-29.861,4.798-40.724c1.121-3.487,2.432-6.186,3.752-8.276h2c4.418,0,7.667-3.582,7.667-8v-1 c0-4.343-3.463-7.87-7.777-7.988C179.087,52.771,169,42.203,156,39.363V27h12V12h-12V0h-15v12h-12v15h12v12.595 c-12,3.15-21.803,13.512-23.888,26.405h-0.779c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h3 c1.32,2.091,2.631,4.789,3.752,8.276c3.491,10.862,5.804,24.582,4.798,40.724h-4.55c-4.418,0-8.333,3.582-8.333,8v1 c0,4.418,3.582,8,8,8c-4.418,0-8,3.582-8,8v1c0,4.418,3.915,8,8.333,8h1.053c0.588,24.855-13.183,53.495-20.737,64.4 c-7.664,11.063-2.482,22.263-0.604,25.6h-1.711c-4.418,0-8.333,3.582-8.333,8v9c0,3.727,3,6.849,6,7.737V298h100v-17.263 c4-0.889,6-4.011,6-7.737v-9C205,259.582,201.751,256,197.333,256z"})},QUEEN:function(e){return Object(J.jsx)("path",{style:{fill:e},d:"M207.218,255.77h-3.369c2.214-3.337,8.32-14.536-0.712-25.6c-8.9-10.905-25.129-39.546-24.438-64.4h3.519 c4.418,0,7.667-3.582,7.667-8v-1c0-4.418-3.582-8-8-8c4.418,0,8-3.582,8-8v-1c0-4.418-3.249-8-7.667-8h-4.626 c-2.064-21.741,1.078-43.054,5.959-54.666c1.86-4.425,4.118-7.79,6.296-10.334h1.371c4.418,0,7.667-3.582,7.667-8v-1 c0-4.418-3.249-8-7.667-8h-9.8c-1.803-10.896-8.998-19.966-18.755-24.383c1.783-2.607,2.829-5.757,2.829-9.154 C165.492,7.267,158.227,0,149.26,0s-16.234,7.267-16.234,16.232c0,3.385,1.037,6.525,2.809,9.127 c-9.788,4.406-17.01,13.49-18.816,24.41h-10.8c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h2.371 c2.178,2.544,4.436,5.909,6.296,10.334c4.881,11.612,8.023,32.925,5.959,54.666h-4.626c-4.418,0-8.333,3.582-8.333,8v1 c0,4.418,3.582,8,8,8c-4.418,0-8,3.582-8,8v1c0,4.418,3.915,8,8.333,8h3.602c0.692,24.854-15.536,53.495-24.438,64.4 c-9.031,11.063-2.926,22.263-0.712,25.6h-3.452c-4.418,0-8.333,3.582-8.333,8v9c0,4.078,3,7.438,7,7.931v17.069h118V280.7 c4-0.493,7-3.853,7-7.931v-9C214.885,259.352,211.636,255.77,207.218,255.77z"})},ROOK:function(e){return Object(J.jsx)("path",{style:{fill:e},d:"M216.923,246.538c3.457-6.556,9.963-22.777-1.666-39.137C200.508,186.65,179.942,125,193.61,83H207V0h-16v17h-16V0h-18v17 h-16V0h-17v17h-16V0H91v83h14.057c13.668,42-6.98,103.65-21.73,124.401c-11.629,16.359-5.373,32.706-1.916,39.262 C77.347,247.044,74,250.337,74,254.5v18c0,4.418,3.915,8.5,8.333,8.5H83v17h132v-17h1.333c4.418,0,7.667-4.082,7.667-8.5v-18 C224,250.338,220.986,246.92,216.923,246.538z"})}}),X=function(e){var t=Object(b.b)(),c=e.coords,n=e.name,r=e.color,s=Object(b.c)((function(e){return e.websockets})),i=s.mode,l=s.playerColor,u=function(e){return"".concat(70*e,"px")},p=r===a.BLACK,j={type:n,position:[c[0],c[1]],color:r},O={left:u(c[0]),top:u(c[1]),fill:r.toLowerCase()},d=O.left,h=O.top,v=O.fill;return Object(J.jsx)("svg",{viewBox:"".concat(p?"15":"-15"," 0 298 298"),className:"figure",style:{left:d,top:h,transform:p?"rotate(0.5turn)":""},onClick:function(){(i===o.LOCAL_PVP||i===o.NETWORK_PVP&&l===r)&&t(F(j))},children:Object(J.jsx)("g",{children:q[n](v)})})};var $=function(e){var t=Object(b.c)((function(e){return e.userGrid})).chosenFigure,c=e.coords,n=e.chessMark,o=e.color,r=function(e){return"".concat(70*e,"px")};return Object(J.jsx)(J.Fragment,{children:Object(J.jsx)("div",{"data-box":n,className:"chess-square",style:{backgroundColor:t&&t.position[0]===c[0]&&t.position[1]===c[1]?"#548c2f":o,left:r(c[1]),top:r(c[0])}},"".concat(c[0],"-").concat(c[1]))})};var ee=function(e){var t=Object(b.b)(),c=Object(b.c)((function(e){return e.userGrid.chosenFigure})),n=Object(b.c)((function(e){return e.websockets.socket})),o=e.coords,r=function(e){return"".concat(70*e,"px")};return Object(J.jsx)(J.Fragment,{children:Object(J.jsx)("div",{onClick:function(){n&&n.send(JSON.stringify({payload:{event:C.MOVE,params:{chosenFigure:c,dir:o}}})),t(_(o))},className:"can_move",style:{left:r(o[0]),top:r(o[1])}},"can_move-".concat(o[0],"-").concat(o[1]))})},te=["A","B","C","D","E","F","G","H"],ce=[{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],ne=a.BLACK,oe=a.WHITE,re={KING:{name:s.KING,moveCheck:function(e,t){return!(e.x-t.x!==1&&e.x-t.x!==-1&&e.x-t.x!==0||e.y-t.y!==1&&e.y-t.y!==-1&&e.y-t.y!==0)}},QUEEN:{name:s.QUEEN,moveCheck:function(e,t){return!!(Math.abs(e.x-t.x)&&Math.abs(e.y-t.y)||e.x===t.x||e.y===t.y)}},HORSE:{name:s.HORSE,moveCheck:function(e,t){var c=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return!!(1===c&&2===n||2===c&&1===n)}},BISHOP:{name:s.BISHOP,moveCheck:function(e,t){return!(Math.abs(e.x-t.x)!==Math.abs(e.y-t.y))}},PAWN:{name:s.PAWN,moveCheck:function(e,t,c){if(c===ne&&((t.y===e.y+1||1===e.y&&t.y===e.y+2)&&t.x===e.x))return!0;if(c===oe&&((t.y===e.y-1||e.y===n.GRID_SIZE-2&&t.y===e.y-2)&&t.x===e.x))return!0;return!1}},ROOK:{name:s.ROOK,moveCheck:function(e,t){return e.x===t.x||e.y===t.y}}},ae=s.KING,se=s.HORSE,ie=s.PAWN,le=s.ROOK,ue=s.QUEEN,pe=s.BISHOP,be=function(e,t){if(t){var c={x:t.position[0],y:t.position[1]};return re[t.type].moveCheck(c,e,t.color)}return!1},je={isOpen:!1,playerNameInput:"",mode:r.EDIT_NAME},Oe=Object(m.a)({name:"popups",initialState:je,reducers:{setPopup:function(e,t){e.mode=t.payload.mode,e.isOpen=t.payload.isOpen},setPlayerInput:function(e,t){e.playerNameInput=t.payload}}}),de=Oe.actions,he=de.setPopup,ve=de.setPlayerInput,ye=Oe.reducer;var fe=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.userGrid})),c=t.chosenFigure,n=t.currentMover,l=t.grid,u=t.winner,p=Object(b.c)((function(e){return e.websockets})),j=p.mode,O=p.playerColor;Object(i.useEffect)((function(){u&&e(he({isOpen:!0,mode:r.SHOW_WINNER}))}),[u]);var d=Object(i.useMemo)((function(){return function(e,t){return e.map((function(e,c){return e.map((function(e,n){return"number"!==typeof e&&Object(J.jsx)(t,{color:e.color,coords:[n,c],name:s[e.type]},"".concat(JSON.stringify(e),"-").concat(n,"-").concat(c))})).filter((function(e){return"number"!==typeof e}))})).reduce((function(e,t){return[].concat(Object(v.a)(e),Object(v.a)(t))}))}(l,X)}),[l]),h=function(e,t){for(var c=!1,n=[],o=0;o<e.length;o++){c=!c;for(var r=0;r<e.length;r++)c=!c,n.push(Object(J.jsx)(t,{color:c?"#032B43":"",coords:[r,o],chessMark:"".concat(te[r],"-").concat(o)},"".concat(c?"black":"white").concat(r,"-").concat(o)))}return n}(l,$),y=Object(i.useMemo)((function(){return c?function(e,t,c){for(var n=[],o=t.position[0],r=t.position[1],s=0;s<e.length;s++){if(t.type===pe||t.type===ae||t.type===le||t.type===ue)for(var i=o+ce[s].x,l=r+ce[s].y;i<e.length&&i>-1&&l<e.length&&l>-1;){var u=e[l][i];if(0!==u&&u.color===t.color)break;if(be({x:i,y:l},t)&&n.push({x:i,y:l}),u&&u.color!==t.color)break;i+=ce[s].x,l+=ce[s].y}if(t.type===se)for(var p=0;p<8;p++){var b=e[s][p];be({x:p,y:s},t)&&(!b||b.color!==t.color)&&n.push({x:p,y:s})}if(t.type===ie)for(var j=o+ce[s].x,O=r+ce[s].y;j<e.length&&j>=0&&O<e.length&&O>=0;){var d=e[O][j];be({x:j,y:O},t)&&!d&&n.push({x:j,y:O}),t.color===a.WHITE&&0!==d&&1===Math.abs(o-j)&&r-O===1&&d.color!==t.color&&n.push({x:j,y:O}),t.color===a.BLACK&&d&&1===Math.abs(o-j)&&O-r===1&&d.color!==t.color&&n.push({x:j,y:O}),j+=ce[s].x,O+=ce[s].y}}return n.map((function(e){return Object(J.jsx)(c,{coords:[e.x,e.y]},"move-".concat(e.x,"-").concat(e.y))}))}(l,c,ee):""}),[c]);return Object(J.jsxs)("div",{className:"grid",style:{transform:j===o.NETWORK_PVP&&O===a.BLACK||j===o.LOCAL_PVP&&n===a.BLACK?"rotate(0.5turn)":""},children:[d,h,y]})};c(43);var me=function(e){var t,c=e.color,n=e.type,o=Object(b.b)(),s=Object(b.c)((function(e){return e.websockets[n]})),l=Object(b.c)((function(e){return e.userGrid.currentMover})),u=Object(b.c)((function(e){return e.userGrid.moves[c]})),p=Object(b.c)((function(e){return e.websockets.gameCycle})),j=c===a.BLACK,O=Object(i.useMemo)((function(){return p?u.map((function(e){return Object(J.jsxs)("div",{children:[Object(J.jsx)("svg",{viewBox:"".concat(j?"15":"-15"," 0 298 298"),className:"figure",style:{width:"30px",height:"auto"},children:Object(J.jsx)("g",{children:q[e.type](e.color)})}),Object(J.jsxs)("span",{children:[te[e.prevPosition[0]],e.prevPosition[1]+1,"-",te[e.position[0]],e.position[1]+1]})]},JSON.stringify(e))})).reverse():""}),[u,p]),d=Object(i.useMemo)((function(){return p?u.map((function(e){return Object(J.jsx)("div",{children:Object(J.jsx)("span",{children:z(e.time)})},"time-".concat(e.time))})).reverse():""}),[u,p]),h=Object(i.useMemo)((function(){return p?Object(J.jsx)("div",{className:"player-mover",style:{opacity:"".concat(c===l?"1":"0")},children:Object(J.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKYSURBVHgBpZY/aBVBEMa/PQJiIvG/QjAmaCNECRaSQkEhoiCCvYWQQhsLQQW1UEyhFgpqEcRGUBBtBCtFFHxaKkLAwkrylHT+4SFCwBTnN+92k9m5vXsvOvDj7nbnzTc7tzv3HApz/rqaHCUryCx56Mdz4xfuc8Rm/Zwe7zEBJsgN9dwiW0kvWUaWk41+rp+sIxn5Rk6TpklGJ9AW05P9iG07uYbubCfZS76iYtWZEsoTDkuxIRRl703MteNmFVn8q+0mV0y83Gu4DPVCDp3tPfmink+RA0aobRn+z+6TMbKNXFfjF6xQEMtVFtZk+z8nP1Bvf8g50vDPslH2GR9nH4bJC/KKPCYDfnwTimPxGYsbKTDufZwXCeP31HgGVUVnCJMugYg2VVDZ6nL2XpOX/irj82SNibUkIacq8FYJSqnv+PuzZtULsRzKLQjofBTEbxX54IXFjpE95BeZ8zEmbayqFXWz6h1khnwiF9WKnqJcnYWA3ZQuqwgg17uIN82txO/b1klIXvKGGqEJXzot1iBrbazQiKve0WHyAMX7uUnOKP8g2PJzMLH6yE8bsK50DZPx5gq/KRRbPTCY8Ml6kGgrKonb5I3K9nuF3zDiz5V8hGeNT+RgA5wnJ/xzEDuCohfOKz+Z6zO/lwp81ELiZ7/UevKRT0Y36+mEkNiAiTFohXTwqu09jfidHVJ+wWclyv1yKhHLZYkVhSyGyChiO2hWJDaCso3YFcGXMSUkNp4IIi3pMortrm0S8dlrWaFwU3WoZ1AuT2i0wUd251wNJ1UCLtTfZiH/lEaRPhJNLH4kr6LYtSmT1W2BqUKqBeUduOT9xmp8niDRrnLEL12ux8l6pNuY+D7z9+/IfrLL+PxG8bcuahh/AYdyuJcvnSWxAAAAAElFTkSuQmCC",alt:"mover"})}):""}),[p,l]);return Object(J.jsxs)("div",{className:"player-block",children:[Object(J.jsxs)("div",{className:"player-header",children:[h,Object(J.jsx)("span",{children:null===(t=s[0])||void 0===t?void 0:t.toUpperCase()})]}),Object(J.jsx)("div",{onClick:function(){o(he({isOpen:!0,mode:r.EDIT_NAME}))},className:"player-name",children:s}),Object(J.jsxs)("div",{className:"player-table",style:{opacity:p?"1":"0"},children:[Object(J.jsx)("div",{className:"move-table",children:O}),Object(J.jsx)("div",{className:"move-table time-table",children:d})]})]})},xe=(c(44),"//localhost:4000/"),Ce="ws:".concat(xe,"echo"),Ne=("http:".concat(xe,"replays"),{gameCycle:!1,player:"Player 1",enemy:"Player 2",mode:o.LOCAL_PVP,connected:!1,readyState:!1,socket:null,opponentConnected:!1,playerColor:a.WHITE}),Ae=Object(m.a)({name:"popups",initialState:Ne,reducers:{setGameCycle:function(e){e.gameCycle=!e.gameCycle},setPlayerName:function(e,t){e.player=t.payload?t.payload:e.player},setOpponentName:function(e,t){e.enemy=t.payload},setGameMode:function(e,t){e.mode=t.payload},setReadyState:function(e,t){e.readyState=t.payload},setConnection:function(e,t){t.payload?(e.connected=!0,e.socket=t.payload):(e.connected=!1,e.socket=null)},setOpponentConnection:function(e,t){e.opponentConnected=t.payload,e.readyState=!0,e.playerColor=t.payload.your_color,e.enemy=t.payload.enemy_name,e.gameCycle=!0}}}),Ee=Ae.actions,ge=Ee.setGameCycle,Pe=Ee.setConnection,ke=Ee.setOpponentConnection,Ie=Ee.setReadyState,Re=Ee.setGameMode,Se=Ee.setPlayerName,Me=(Ee.setOpponentName,Ae.reducer),He=function(e,t){var c=new WebSocket(Ce);c.addEventListener("open",(function(){c.send(JSON.stringify({payload:{event:C.CHANGE_NAME,name:t}})),e(Pe(c))})),c.addEventListener("close",(function(t){t.wasClean?console.log("\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u043e \u0447\u0438\u0441\u0442\u043e"):console.log("\u041e\u0431\u0440\u044b\u0432 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f"),console.log("\u041a\u043e\u0434: ".concat(t.code," \u043f\u0440\u0438\u0447\u0438\u043d\u0430: ").concat(t.reason)),e(Pe(!1))})),c.addEventListener("error",(function(e){console.log(e)})),c.addEventListener("message",(function(t){if(console.log(t),function(e){try{JSON.parse(e)}catch(t){return!1}return!0}(t.data)){var c=JSON.parse(t.data);!function(e,t){var c=t.event,n=C.MOVE,o=C.START;switch(C.GAME_OWER,c){case n:e(F(t.params.chosenFigure)),e(_(t.params.dir));break;case o:e(ke(t))}}(e,c)}}))};c(45);var We=function(){var e=o.LOCAL_PVP,t=o.NETWORK_PVP,c=Object(b.b)(),n=Object(b.c)((function(e){return e.websockets.mode})),r=Object(b.c)((function(e){return e.websockets.player})),a=Object(b.c)((function(e){return e.websockets.socket})),s=Object(b.c)((function(e){return e.websockets.connected})),i=Object(b.c)((function(e){return e.websockets.opponentConnected})),l=Object(b.c)((function(e){return e.websockets.readyState}));return Object(J.jsx)("div",{className:"menu",children:Object(J.jsxs)(j.b,{to:"/game",onClick:function(){switch(n){case t:s&&i?c(ge()):(c(Ie("WAIT")),null===a||void 0===a||a.send(JSON.stringify({payload:{event:C.START}})));break;case e:c(ge())}},className:"menu-btn",style:{backgroundColor:l&&n===t&&s?"grey":""},children:[Object(J.jsx)("button",{type:"button",onClick:function(o){o.preventDefault(),o.stopPropagation(),n===t||a?(null===a||void 0===a||a.close(1e3,"\u0440\u0430\u0431\u043e\u0442\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0435\u043d\u0430"),c(Re(e))):(He(c,r),c(Re(t)))},className:"button-online",style:{backgroundColor:function(e){var c=e.gameMode,n=e.conn;return c===t&&n?"":c!==t||n?"#C38D9D":"grey"}({gameMode:n,conn:s})},children:n===t?"online":"offline"}),l&&n===t&&s?"...":"Start",Object(J.jsx)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault()},type:"button",className:"button-replays",children:"view replays"})]})})},Ke=a.WHITE,Te=a.BLACK;var we=function(){var e=Object(b.c)((function(e){return e.websockets})).gameCycle;return Object(J.jsxs)("div",{className:"main",children:[Object(J.jsx)(me,{type:"player",color:Ke}),Object(J.jsxs)(Z.d,{children:[Object(J.jsx)(Z.b,{exact:!0,path:"/",component:We}),e?Object(J.jsxs)(Z.d,{children:[Object(J.jsx)(Z.b,{path:"/game",component:fe}),Object(J.jsx)(Z.a,{from:"/",to:"/game"})]}):Object(J.jsxs)(Z.d,{children:[Object(J.jsx)(Z.b,{path:"/",component:We}),Object(J.jsx)(Z.a,{from:"/game",to:"/"})]})]}),Object(J.jsx)(me,{type:"enemy",color:Te})]})};c(46);var Le=function(){return Object(J.jsx)(J.Fragment,{children:Object(J.jsx)("div",{className:"footer",children:Object(J.jsx)("div",{className:"rs-school",children:"RS School 2021"})})})},Be=function(){var e=Object(b.c)((function(e){return e.popup.playerNameInput})),t=Object(b.c)((function(e){return e.websockets.socket})),c=Object(b.b)();return Object(J.jsxs)("div",{onClick:function(e){return e.stopPropagation()},className:"popup-window",children:[Object(J.jsx)("input",{className:"name-placeholder",value:e,type:"text",onChange:function(e){c(ve(e.target.value))}}),Object(J.jsx)("div",{children:"player 1"}),Object(J.jsx)("button",{type:"button",className:"change-btn",onClick:function(n){n.preventDefault(),n.stopPropagation(),c(Se(e)),t&&t.send(JSON.stringify({payload:{event:C.CHANGE_NAME,name:e}})),c(he({isOpen:!1,mode:null}))},children:"Change name"})]})},Ge=(c(47),function(){return Object(J.jsxs)("div",{className:"popup-window",children:[Object(J.jsx)("div",{children:"Winner"}),Object(J.jsx)("button",{type:"button",className:"change-btn",children:"Change name"})]})});var Ve=function(){var e=Object(b.c)((function(e){return e.popup.isOpen})),t=Object(b.c)((function(e){return e.popup.mode})),c=Object(b.b)();return Object(J.jsx)(J.Fragment,{children:e?Object(J.jsx)("div",{onClick:function(){c(he({isPopup:!1,mode:null}))},className:"popup",children:function(){if(e){if(t===r.EDIT_NAME)return Object(J.jsx)(Be,{});if(t===r.SHOW_WINNER)return Object(J.jsx)(Ge,{})}return""}()}):""})};var Fe=function(){return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(Ve,{}),Object(J.jsx)(Y,{}),Object(J.jsx)(we,{}),Object(J.jsx)(Le,{})]})},_e=c(6),Ue=c(28),De=c(18),ze=Object(_e.combineReducers)({userGrid:D,popup:ye,websockets:Me}),Je=Object(_e.createStore)(ze,Object(Ue.composeWithDevTools)(Object(_e.applyMiddleware)(De.a)));c(48);p.a.render(Object(J.jsx)(b.a,{store:Je,children:Object(J.jsx)(j.a,{children:Object(J.jsx)(l.a.StrictMode,{children:Object(J.jsx)(Fe,{})})})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.089c828a.chunk.js.map
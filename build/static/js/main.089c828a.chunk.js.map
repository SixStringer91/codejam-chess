{"version":3,"sources":["enums/enums.ts","assets/logo.svg","assets/title.svg","redux/reducers/grid.state.ts","utils/timer.string-maker.ts","components/header/timer/timer.tsx","components/header/header.tsx","components/main/game/figure/figures.img.tsx","components/main/game/figure/figure.component.tsx","components/main/game/square/square.component.tsx","components/main/game/move_square/move_square.component.tsx","utils/square_directions.ts","components/main/game/figure/figure.rules.ts","components/main/game/game_utils/game.utils.tsx","redux/reducers/popup.state.ts","components/main/game/game.tsx","components/main/player_stats/player.stats.tsx","assets/mover.png","utils/backend_utils.ts","redux/reducers/network.state.ts","redux/thunks/websockets.thunks.ts","redux/thunks/websocket.messages.ts","components/main/menu/menu.tsx","components/main/main.tsx","components/footer/footer.tsx","components/popup/NameChanger/NameChanger.tsx","components/popup/WinnerVIewer/WinnerViewer.tsx","components/popup/popup.tsx","App.tsx","redux/reducers/index.ts","redux/store/store.tsx","index.tsx"],"names":["MagicNumbers","GameModes","PopupMode","FigureColor","ChessFigures","SocketEvents","ChessIDBlack","H","color","BLACK","type","HORSE","K","KING","R","ROOK","B","BISHOP","Q","QUEEN","P","PAWN","ChessIDWhite","h","WHITE","k","r","b","q","p","initialState","winner","time","chosenFigure","currentMover","gameStats","defeatedFigures","moves","grid","userGridSlice","createSlice","name","reducers","setTime","state","action","payload","setChosenFigure","position","figureMove","current","fx","fy","dx","dy","figure","beatedFigure","Date","now","prevPosition","actions","timeFormatHandle","timeInMinutes","seconds","minutes","Math","trunc","Timer","useSelector","userGrid","dispatch","useDispatch","setTimeout","className","Header","gameCycle","websockets","timerStart","useMemo","alt","src","logo","title","to","figuresSVG","fill","style","d","Figure","props","coords","mode","playerColor","setPosition","coord","isBLack","figureProps","left","top","toLowerCase","viewBox","transform","onClick","LOCAL_PVP","NETWORK_PVP","Square","chessMark","data-box","backgroundColor","MoveSquare","socket","send","JSON","stringify","event","MOVE","params","dir","squareDir","x","y","figures","moveCheck","square","abs","GRID_SIZE","squareCheck","figureCoords","isOpen","playerNameInput","EDIT_NAME","popupSlice","setPopup","setPlayerInput","Game","useEffect","SHOW_WINNER","figuresList","Component","map","col","row","filter","reduce","summ","generateFigures","squaresList","gridRender","length","push","generateSquares","canMoveList","squareCoords","figureDir","i","currentSquare","el","generateMoves","PlayerStats","movesRender","move","width","height","reverse","timeRender","currentMoverLabel","opacity","toUpperCase","BASE_URL","WS_URL","player","enemy","connected","readyState","opponentConnected","websocketsSlice","setGameCycle","setPlayerName","setOpponentName","setGameMode","setReadyState","setConnection","setOpponentConnection","your_color","enemy_name","setWebsocketConnection","wsConnection","WebSocket","addEventListener","CHANGE_NAME","wasClean","console","log","code","reason","str","parse","e","isJSON","data","msg","START","GAME_OWER","websocketMessagesHandler","Menu","playerName","opponent","preventDefault","stopPropagation","close","gameMode","conn","isOnlineBtnColor","Main","exact","path","component","from","Footer","NameChange","inputValue","popup","value","onChange","target","WinnerViewer","Popup","isPopup","popupSwitcher","App","rootReducer","combineReducers","store","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.089c828a.chunk.js","sourcesContent":["export enum MagicNumbers {\n  GRID_SIZE = 8,\n  HOUR = 60 * 60\n}\n\nexport enum GameModes {\n  LOCAL_PVP = 'LOCAL_PVP',\n  NETWORK_PVP = 'NETWORK_PVP',\n  LOCAL_PVE = 'LOCAL_PVE'\n}\n\nexport enum PopupMode {\n  EDIT_NAME = 'EDIT_NAME',\n  SHOW_WINNER = 'SHOW_WINNER'\n}\n\nexport enum FigureColor {\n  BLACK = '#FFC533',\n  WHITE = '#E0ECF6'\n}\n\nexport enum ChessFigures {\n  HORSE = 'HORSE',\n  KING = 'KING',\n  ROOK = 'ROOK',\n  BISHOP = 'BISHOP',\n  QUEEN = 'QUEEN',\n  PAWN = 'PAWN'\n}\n\nexport const ChessIDBlack = {\n  H: {\n    color: FigureColor.BLACK,\n    type: ChessFigures.HORSE\n  },\n  K: {\n    color: FigureColor.BLACK,\n    type: ChessFigures.KING\n  },\n  R: {\n    color: FigureColor.BLACK,\n    type: ChessFigures.ROOK\n  },\n  B: {\n    color: FigureColor.BLACK,\n    type: ChessFigures.BISHOP\n  },\n  Q: {\n    color: FigureColor.BLACK,\n    type: ChessFigures.QUEEN\n  },\n  P: {\n    color: FigureColor.BLACK,\n    type: ChessFigures.PAWN\n  }\n};\n\nexport const ChessIDWhite = {\n  h: {\n    color: FigureColor.WHITE,\n    type: ChessFigures.HORSE\n  },\n  k: {\n    color: FigureColor.WHITE,\n    type: ChessFigures.KING\n  },\n  r: {\n    color: FigureColor.WHITE,\n    type: ChessFigures.ROOK\n  },\n  b: {\n    color: FigureColor.WHITE,\n    type: ChessFigures.BISHOP\n  },\n  q: {\n    color: FigureColor.WHITE,\n    type: ChessFigures.QUEEN\n  },\n  p: {\n    color: FigureColor.WHITE,\n    type: ChessFigures.PAWN\n  }\n};\n\nexport enum SocketEvents {\n  MOVE = 'MOVE',\n  CHANGE_NAME = 'CHANGE_NAME',\n  START = 'START',\n  GAME_OWER = 'GAME_OWER',\n}\n","export default __webpack_public_path__ + \"static/media/logo.4c9f4b4a.svg\";","export default __webpack_public_path__ + \"static/media/title.63eef6e4.svg\";","import { createSlice, current } from '@reduxjs/toolkit';\nimport {\n  ChessIDBlack,\n  ChessIDWhite,\n  FigureColor\n} from '../../enums/enums';\nimport { IFigure, IUserGridState } from '../../interfaces/interfaces';\n\nconst {\n  B, H, K, Q, R, P\n} = ChessIDBlack;\nconst {\n  b, h, k, q, r, p\n} = ChessIDWhite;\n\nconst initialState: IUserGridState = {\n  winner: null,\n  time: 60 * 60,\n  chosenFigure: null,\n  currentMover: FigureColor.WHITE,\n  gameStats: [],\n  defeatedFigures: {\n    [FigureColor.BLACK]: [],\n    [FigureColor.WHITE]: []\n  },\n  moves: {\n    [FigureColor.BLACK]: [],\n    [FigureColor.WHITE]: []\n  },\n  grid: [\n    [R, H, B, Q, K, B, H, R],\n    [P, P, P, P, P, P, P, P],\n    [0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, K, 0, 0, 0, 0],\n    [p, p, p, p, p, p, p, p],\n    [r, h, b, q, k, b, h, r]\n  ]\n};\n\nconst userGridSlice = createSlice({\n  name: 'grid-state',\n  initialState,\n  reducers: {\n    setTime: (state, action) => {\n      state.time = action.payload;\n    },\n    setChosenFigure: (state, action) => {\n      if (action.payload.color === state.currentMover) {\n        state.chosenFigure = {\n          ...action.payload,\n          position: [...action.payload.position]\n        };\n      }\n    },\n    figureMove: (state, action) => {\n      const {\n        grid, chosenFigure, defeatedFigures, time\n      } = current(state);\n      const { WHITE, BLACK } = FigureColor;\n      if (chosenFigure) {\n        const [fx, fy] = chosenFigure.position;\n        const [dx, dy] = action.payload;\n        if (grid[dy]![dx] === K || grid[dy]![dx] === k) {\n          state.winner = chosenFigure.color;\n        }\n        const figure = <IFigure>grid[fy]![fx];\n        const beatedFigure = <IFigure>grid[dy]![dx];\n        state.grid[dy]![dx] = figure;\n        state.grid[fy]![fx] = 0;\n        if (beatedFigure) {\n          state.defeatedFigures[figure.color] = [\n            ...defeatedFigures[figure.color],\n            { ...beatedFigure, position: [dx, dy], time: Date.now() }\n          ];\n        }\n        // state.grid = grid.map((row) => row.map((col) => col));\n        state.chosenFigure = null;\n        state.currentMover = figure.color === WHITE ? BLACK : WHITE;\n        state.moves[chosenFigure.color] = [\n          ...state.moves[chosenFigure.color],\n          {\n            prevPosition: [fx, fy],\n            position: [dx, dy],\n            color: figure.color,\n            time: 60 * 60 - time,\n            type: figure.type\n          }\n        ];\n      }\n    }\n  }\n});\nexport const {\n  setChosenFigure,\n  figureMove,\n  setTime\n} = userGridSlice.actions;\nexport default userGridSlice.reducer;\n","export function timeFormatHandle(timeInMinutes: number) {\n  const seconds = timeInMinutes % 60;\n  const minutes = (timeInMinutes / 60) % 60;\n  return `${Math.trunc(minutes)}:${seconds < 10 ? `0${seconds}` : seconds}`;\n}\n","import { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../../../redux/reducers';\nimport { setTime } from '../../../redux/reducers/grid.state';\nimport { timeFormatHandle } from '../../../utils/timer.string-maker';\n\nfunction Timer() {\n  const timeInMinutes = useSelector((state: RootState) => state.userGrid.time);\n  const dispatch = useDispatch();\n  setTimeout(() => {\n    if (timeInMinutes >= 0) {\n      dispatch(setTime(timeInMinutes - 1));\n    }\n  }, 1000);\n  return (\n    <div className=\"timer\">\n      <div>Round Time:</div>\n      <div>\n        {timeInMinutes === 60 * 60 ? '60:00' : timeFormatHandle(timeInMinutes)}\n      </div>\n    </div>\n  );\n}\n\nexport default Timer;\n","import { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport logo from '../../assets/logo.svg';\nimport title from '../../assets/title.svg';\nimport { RootState } from '../../redux/reducers';\nimport './header.style.scss';\nimport Timer from './timer/timer';\n\nfunction Header() {\n  const gameCycle = useSelector((state:RootState) => state.websockets.gameCycle);\n\n  const timerStart = useMemo(() => (gameCycle ? <Timer /> : ''), [gameCycle]);\n  return (\n    <div className=\"header\">\n      <div className=\"logo-block\">\n        <img alt=\"logo\" className=\"logo\" src={logo} />\n        <img alt=\"title\" className=\"title\" src={title} />\n      </div>\n      {timerStart}\n      <div className=\"admit-loss\">таймер</div>\n      <div className=\"toLobby\">лобби</div>\n      <NavLink to=\"/Game\">Replay</NavLink>\n      <NavLink to=\"/notGame\">To Lobby</NavLink>\n    </div>\n  );\n}\n\nexport default Header;\n","\ninterface IFiguresSVG {\n  [key:string]:(fill:string)=>JSX.Element\n}\nexport const figuresSVG:IFiguresSVG = {\n  BISHOP: (fill:string) => (\n    <path\n      style={{ fill }}\n      d=\"M206.873,255.08h-3.41c2.214-3.337,8.32-14.536-0.712-25.6c-8.9-10.905-25.137-39.546-24.448-64.4h3.57\n      c4.418,0,7.667-3.582,7.667-8v-1c0-4.418-3.249-8-7.667-8h-4.333v-4.285c13-8.971,20.511-23.502,20.511-39.914\n      c0-10.332-7.011-26.11-15.819-41.721l-18.553,18.595c-3.111,3.111-8.182,3.111-11.294,0.001l-0.921-0.933\n      c-3.111-3.11-3.106-8.202,0.005-11.313l21.676-21.674c-4.444-7.069-8.869-13.678-12.703-19.224\n      c2.881-2.93,4.663-6.944,4.663-11.379C165.106,7.268,157.841,0,148.874,0c-8.967,0-16.234,7.268-16.234,16.233\n      c0,4.434,1.781,8.448,4.662,11.379c-14.585,21.101-37.94,57.587-37.94,76.269c0,16.853,8.178,31.724,21.178,40.625v3.574h-4.667\n      c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h3.571c0.689,24.855-15.547,53.495-24.448,64.4\n      c-9.031,11.064-2.926,22.263-0.712,25.6h-3.411c-4.418,0-8.333,3.582-8.333,8v9c0,4.078,3,7.438,7,7.931v17.069h118v-17.069\n      c4-0.493,7-3.853,7-7.931v-9C214.54,258.662,211.291,255.08,206.873,255.08z\"/>\n  ),\n  PAWN: (fill:string) => (\n    <path\n      style={{ fill }}\n      d=\"M223.333,247h-5.926c2.607-3.811,10.798-18.024-0.727-32.248c-13.334-16.46-39.863-65.748-27.324-98.752h0.977\n      c4.418,0,7.667-3.582,7.667-8v-1c0-4.418-3.249-8-7.667-8h-1.225c10.917-10.466,17.725-25.184,17.725-41.5\n      c0-31.756-25.744-57.5-57.5-57.5s-57.5,25.744-57.5,57.5c0,16.316,6.808,31.034,17.725,41.5h-2.225c-4.418,0-8.333,3.582-8.333,8v1\n      c0,4.418,3.915,8,8.333,8h1.979c12.539,33.004-13.99,82.292-27.324,98.752c-11.524,14.224-3.334,28.437-0.727,32.248h-6.928\n      c-4.418,0-8.333,3.582-8.333,8v18c0,4.418,3.915,8,8.333,8H75v16h148v-16c5,0,8-3.582,8-8v-18C231,250.582,227.751,247,223.333,247\n      z\"/>\n  ),\n  HORSE: (fill:string) => (\n    <path\n      style={{ fill }}\n      d=\"M210.952,116c14.912,0,27.037-12.088,27.037-27s-10.945-25.013-26.964-30.666c-11.333-4-18.018-10.823-23.009-19.412\n\t\tC183.025,30.333,172.025,17,157.525,17c-5.832,0-19.798,0-19.798,0V0c-107,40.03-72.369,184-72.369,184h21.369v14h-6.369\n\t\tc-4.418,0-8.631,3.582-8.631,8v1c0,3.289,2.302,6.111,5.14,7.341c-8.77,15.05-1.419,29.775,0.761,33.659h-5.271\n\t\tc-4.418,0-8.631,3.582-8.631,8v18c0,4.418,4,8,8,8v16h132v-16.069c4-0.493,7-3.853,7-7.931v-18c0-4.418-2.951-8-7.369-8h-4.27\n\t\tc2.181-3.884,8.902-18.609,0.13-33.659c2.838-1.23,4.508-4.052,4.508-7.341v-1c0-4.418-2.951-8-7.369-8h-7.631v-14h24.132\n\t\tc-16.501-54-66.334-83-66.334-83h40.182C191.146,109.889,200.351,116,210.952,116z\"\n    />\n  ),\n  KING: (fill:string) => (\n    <path\n      style={{ fill }}\n      d=\"M197.333,256h-1.641c1.878-3.337,7.061-14.536-0.605-25.6c-7.554-10.905-21.491-39.547-20.904-64.401\n\t\tc4.409-0.01,7.816-3.587,7.816-7.999v-1c0-4.418-3.582-8-8-8c4.418,0,8-3.582,8-8v-1c0-4.418-3.249-8-7.667-8h-3.55\n\t\tc-1.006-16.142,1.307-29.861,4.798-40.724c1.121-3.487,2.432-6.186,3.752-8.276h2c4.418,0,7.667-3.582,7.667-8v-1\n\t\tc0-4.343-3.463-7.87-7.777-7.988C179.087,52.771,169,42.203,156,39.363V27h12V12h-12V0h-15v12h-12v15h12v12.595\n\t\tc-12,3.15-21.803,13.512-23.888,26.405h-0.779c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h3\n\t\tc1.32,2.091,2.631,4.789,3.752,8.276c3.491,10.862,5.804,24.582,4.798,40.724h-4.55c-4.418,0-8.333,3.582-8.333,8v1\n\t\tc0,4.418,3.582,8,8,8c-4.418,0-8,3.582-8,8v1c0,4.418,3.915,8,8.333,8h1.053c0.588,24.855-13.183,53.495-20.737,64.4\n\t\tc-7.664,11.063-2.482,22.263-0.604,25.6h-1.711c-4.418,0-8.333,3.582-8.333,8v9c0,3.727,3,6.849,6,7.737V298h100v-17.263\n\t\tc4-0.889,6-4.011,6-7.737v-9C205,259.582,201.751,256,197.333,256z\"\n    />\n  ),\n  QUEEN: (fill:string) => (\n    <path\n      style={{ fill }}\n      d=\"M207.218,255.77h-3.369c2.214-3.337,8.32-14.536-0.712-25.6c-8.9-10.905-25.129-39.546-24.438-64.4h3.519\n\t\tc4.418,0,7.667-3.582,7.667-8v-1c0-4.418-3.582-8-8-8c4.418,0,8-3.582,8-8v-1c0-4.418-3.249-8-7.667-8h-4.626\n\t\tc-2.064-21.741,1.078-43.054,5.959-54.666c1.86-4.425,4.118-7.79,6.296-10.334h1.371c4.418,0,7.667-3.582,7.667-8v-1\n\t\tc0-4.418-3.249-8-7.667-8h-9.8c-1.803-10.896-8.998-19.966-18.755-24.383c1.783-2.607,2.829-5.757,2.829-9.154\n\t\tC165.492,7.267,158.227,0,149.26,0s-16.234,7.267-16.234,16.232c0,3.385,1.037,6.525,2.809,9.127\n\t\tc-9.788,4.406-17.01,13.49-18.816,24.41h-10.8c-4.418,0-8.333,3.582-8.333,8v1c0,4.418,3.915,8,8.333,8h2.371\n\t\tc2.178,2.544,4.436,5.909,6.296,10.334c4.881,11.612,8.023,32.925,5.959,54.666h-4.626c-4.418,0-8.333,3.582-8.333,8v1\n\t\tc0,4.418,3.582,8,8,8c-4.418,0-8,3.582-8,8v1c0,4.418,3.915,8,8.333,8h3.602c0.692,24.854-15.536,53.495-24.438,64.4\n\t\tc-9.031,11.063-2.926,22.263-0.712,25.6h-3.452c-4.418,0-8.333,3.582-8.333,8v9c0,4.078,3,7.438,7,7.931v17.069h118V280.7\n\t\tc4-0.493,7-3.853,7-7.931v-9C214.885,259.352,211.636,255.77,207.218,255.77z\"\n    />\n  ),\n  ROOK: (fill:string) => (\n    <path\n      style={{ fill }}\n      d=\"M216.923,246.538c3.457-6.556,9.963-22.777-1.666-39.137C200.508,186.65,179.942,125,193.61,83H207V0h-16v17h-16V0h-18v17\n      h-16V0h-17v17h-16V0H91v83h14.057c13.668,42-6.98,103.65-21.73,124.401c-11.629,16.359-5.373,32.706-1.916,39.262\n      C77.347,247.044,74,250.337,74,254.5v18c0,4.418,3.915,8.5,8.333,8.5H83v17h132v-17h1.333c4.418,0,7.667-4.082,7.667-8.5v-18\n      C224,250.338,220.986,246.92,216.923,246.538z\"\n    />\n  )\n};\n","import { useDispatch, useSelector } from 'react-redux';\nimport { setChosenFigure } from '../../../../redux/reducers/grid.state';\nimport { figuresSVG } from './figures.img';\nimport { FigureColor, GameModes } from '../../../../enums/enums';\nimport { IFigureProps } from '../../../../interfaces/interfaces';\nimport { RootState } from '../../../../redux/reducers';\n\nconst Figure = (props: IFigureProps) => {\n  const dispatch = useDispatch();\n  const { coords, name, color } = props;\n\n  const { mode, playerColor } = useSelector(\n    (state: RootState) => state.websockets\n  );\n\n  const setPosition = (coord: number) => `${(560 / 8) * coord}px`;\n\n  const isBLack = color === FigureColor.BLACK;\n  const figureProps = {\n    type: name,\n    position: [coords[0], coords[1]],\n    color\n  };\n  const { left, top, fill } = {\n    left: setPosition(coords[0]),\n    top: setPosition(coords[1]),\n    fill: color.toLowerCase()\n  };\n\n  const figureHandler = () => {\n    const check = mode === GameModes.LOCAL_PVP\n    || (mode === GameModes.NETWORK_PVP && playerColor === color);\n    if (check) dispatch(setChosenFigure(figureProps));\n  };\n\n  return (\n    <svg\n      viewBox={`${isBLack ? '15' : '-15'} 0 298 298`}\n      className=\"figure\"\n      style={{\n        left,\n        top,\n        transform: isBLack ? 'rotate(0.5turn)' : ''\n      }}\n      onClick={figureHandler}\n    >\n      <g>{figuresSVG[name]!(fill)}</g>\n    </svg>\n  );\n};\n\nexport default Figure;\n","import { useSelector } from 'react-redux';\nimport { ISquareProps } from '../../../../interfaces/interfaces';\nimport { RootState } from '../../../../redux/reducers';\n\nfunction Square(props: ISquareProps) {\n  const { chosenFigure } = useSelector((state: RootState) => state.userGrid);\n  const { coords, chessMark, color } = props;\n  const setPosition = (coord:number) => `${(560 / 8) * coord}px`;\n  return (\n    <>\n      <div\n        key={`${coords[0]}-${coords[1]}`}\n        data-box={chessMark}\n        className=\"chess-square\"\n        style={{\n          backgroundColor: chosenFigure\n          && chosenFigure.position[0] === coords[0]\n          && chosenFigure.position[1] === coords[1] ? '#548c2f' : color,\n          left: setPosition(coords[1]),\n          top: setPosition(coords[0])\n        }}\n      />\n\n    </>\n  );\n}\n\nexport default Square;\n","import { useDispatch, useSelector } from 'react-redux';\nimport { SocketEvents } from '../../../../enums/enums';\nimport { IMoveSquareProps } from '../../../../interfaces/interfaces';\nimport { RootState } from '../../../../redux/reducers';\nimport { figureMove } from '../../../../redux/reducers/grid.state';\n\nfunction MoveSquare(props: IMoveSquareProps) {\n  const dispatch = useDispatch();\n  const chosenFigure = useSelector(\n    (state:RootState) => state.userGrid.chosenFigure\n  );\n  const socket = useSelector((state:RootState) => state.websockets.socket);\n  const { coords } = props;\n  const setPosition = (coord:number) => `${(560 / 8) * coord}px`;\n\n  const setDirection = () => {\n    if (socket) {\n      socket.send(\n        JSON.stringify({\n          payload: {\n            event: SocketEvents.MOVE,\n            params: { chosenFigure, dir: coords }\n          }\n        })\n      );\n    }\n    dispatch(figureMove(coords));\n  };\n\n  return (\n    <>\n      <div\n        key={`can_move-${coords[0]}-${coords[1]}`}\n        onClick={setDirection}\n        className=\"can_move\"\n        style={{\n          left: setPosition(coords[0]),\n          top: setPosition(coords[1])\n        }}\n      />\n    </>\n  );\n}\n\nexport default MoveSquare;\n","export const chessMark = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'];\n\nexport const squareDir = [\n  {\n    x: -1,\n    y: 0\n  },\n  {\n    x: -1,\n    y: -1\n  },\n  {\n    x: 0,\n    y: -1\n  },\n  {\n    x: 1,\n    y: -1\n  },\n  {\n    x: 1,\n    y: 0\n  },\n  {\n    x: 1,\n    y: 1\n  },\n  {\n    x: 0,\n    y: 1\n  },\n  {\n    x: -1,\n    y: 1\n  }\n];\n","import {\n  ChessFigures,\n  FigureColor,\n  MagicNumbers\n} from '../../../../enums/enums';\n\ninterface IMoveCheck {\n  x: number;\n  y: number;\n}\n\ntype IMoveCheckFunction = (\n  figure: IMoveCheck,\n  square: IMoveCheck,\n  color?:FigureColor) => boolean\n\ninterface IFigureMoveValidationElement {\n  name:string,\n  moveCheck: IMoveCheckFunction\n}\n\ninterface IFigureMoveValidation {\n  [key:string]:IFigureMoveValidationElement;\n}\n\nconst { BLACK, WHITE } = FigureColor;\n\nexport const figures:IFigureMoveValidation = {\n  KING: {\n    name: ChessFigures.KING,\n    moveCheck(figure: IMoveCheck, square: IMoveCheck) {\n      const check = (figure.x - square.x === 1\n        || figure.x - square.x === -1\n        || figure.x - square.x === 0)\n        && (figure.y - square.y === 1\n          || figure.y - square.y === -1\n          || figure.y - square.y === 0);\n      if (check) return true;\n      return false;\n    }\n  },\n  QUEEN: {\n    name: ChessFigures.QUEEN,\n    moveCheck(figure: IMoveCheck, square: IMoveCheck) {\n      const check = ((Math.abs(figure.x - square.x))\n        && Math.abs(figure.y - square.y))\n        || figure.x === square.x\n        || figure.y === square.y;\n      if (check) return true;\n      return false;\n    }\n  },\n  HORSE: {\n    name: ChessFigures.HORSE,\n    moveCheck(figure: IMoveCheck, square: IMoveCheck) {\n      const dx = Math.abs(figure.x - square.x);\n      const dy = Math.abs(figure.y - square.y);\n      const check = (dx === 1 && dy === 2) || (dx === 2 && dy === 1);\n      if (check) return true;\n      return false;\n    }\n  },\n  BISHOP: {\n    name: ChessFigures.BISHOP,\n    moveCheck(figure: IMoveCheck, square: IMoveCheck) {\n      const check = Math.abs(figure.x - square.x)\n      === Math.abs(figure.y - square.y);\n      if (check) return true;\n      return false;\n    }\n  },\n  PAWN: {\n    name: ChessFigures.PAWN,\n    moveCheck(figure: IMoveCheck, square: IMoveCheck, color?:FigureColor) {\n      if (color === BLACK) {\n        const check = (\n          (square.y === figure.y + 1)\n          || (figure.y === 1\n          && square.y === figure.y + 2))\n          && square.x === figure.x;\n        if (check) return true;\n      }\n      if (color === WHITE) {\n        const check = (\n          (square.y === figure.y - 1)\n          || (figure.y === MagicNumbers.GRID_SIZE - 2\n          && square.y === figure.y - 2))\n          && square.x === figure.x;\n        if (check) return true;\n      }\n      return false;\n    }\n  },\n  ROOK: {\n    name: ChessFigures.ROOK,\n    moveCheck(figure: IMoveCheck, square: IMoveCheck) {\n      if (figure.x === square.x || figure.y === square.y) return true;\n      return false;\n    }\n  }\n};\n","import React, { ReactElement } from 'react';\nimport { chessMark, squareDir } from '../../../../utils/square_directions';\nimport { ChessFigures, FigureColor } from '../../../../enums/enums';\nimport { figures } from '../figure/figure.rules';\nimport {\n  IFigure,\n  IChosenFigure,\n  IFigureProps,\n  ISquareProps,\n  IMoveSquareProps\n} from '../../../../interfaces/interfaces';\n\nconst {\n  KING,\n  HORSE,\n  PAWN,\n  ROOK,\n  QUEEN,\n  BISHOP\n} = ChessFigures;\n\nexport const generateFigures = (grid:(IFigure|0)[][],\n  Component:React.FC<IFigureProps>) => grid\n  .map((col, y) => col\n    .map(\n      (row, x) => typeof row !== 'number' && (\n        <Component\n          color={row.color}\n          coords={[x, y]}\n          key={`${JSON.stringify(row)}-${x}-${y}`}\n          name={ChessFigures[row.type]}\n        />\n      )\n    )\n    .filter((row) => typeof row !== 'number'))\n  .reduce((summ, current) => [...summ, ...current]);\n\nexport const generateSquares = (\n  grid:(IFigure|0)[][],\n  Component:React.FC<ISquareProps>\n) => {\n  let isBLack = false;\n  const gridRender: ReactElement<HTMLDivElement>[] = [];\n  for (let y = 0; y < grid.length; y++) {\n    isBLack = !isBLack;\n    for (let x = 0; x < grid.length; x++) {\n      isBLack = !isBLack;\n      gridRender.push(\n        <Component\n          key={`${isBLack ? 'black' : 'white'}${x}-${y}`}\n          color={isBLack ? '#032B43' : ''}\n          coords={[x, y]}\n          chessMark={`${chessMark[x]}-${y}`}\n        />\n      );\n    }\n  }\n  return gridRender;\n};\n\nexport const squareCheck = (\n  square:{x:number, y:number},\n  figure:IChosenFigure\n) => {\n  if (figure) {\n    const figureCoords = {\n      x: figure.position[0],\n      y: figure.position[1]\n    };\n    return figures[figure.type]!.moveCheck(figureCoords, square, figure.color);\n  }\n  return false;\n};\n\nexport const generateMoves = (\n  grid:(IFigure|0)[][],\n  figure:IChosenFigure,\n  Component:React.FC<IMoveSquareProps>\n)\n: ReactElement<HTMLDivElement>[] => {\n  const squareCoords = [];\n  const figureDir = {\n    x: figure.position[0],\n    y: figure.position[1]\n  };\n  for (let i = 0; i < grid.length; i++) {\n    if (figure.type === BISHOP\n      || figure.type === KING\n      || figure.type === ROOK\n      || figure.type === QUEEN) {\n      let x = figureDir.x + squareDir[i]!.x;\n      let y = figureDir.y + squareDir[i]!.y;\n      while (x < grid.length && x > -1 && y < grid.length && y > -1) {\n        const currentSquare = grid[y]![x];\n        if (currentSquare !== 0 && currentSquare!.color === figure.color) {\n          break;\n        }\n        if (squareCheck({ x, y }, figure)) {\n          squareCoords.push({ x, y });\n        }\n        if (currentSquare\n            && currentSquare!.color !== figure.color) {\n          break;\n        }\n        x += squareDir[i]!.x;\n        y += squareDir[i]!.y;\n      }\n    }\n    if (figure.type === HORSE) {\n      for (let x = 0; x < 8; x++) {\n        const currentSquare = grid[i]![x];\n        const check = squareCheck({ x, y: i }, figure)\n        && (!currentSquare || currentSquare.color !== figure.color);\n        if (check) {\n          squareCoords.push({ x, y: i });\n        }\n      }\n    }\n    if (figure.type === PAWN) {\n      let x = figureDir.x + squareDir[i]!.x;\n      let y = figureDir.y + squareDir[i]!.y;\n      while (x < grid.length && x >= 0 && y < grid.length && y >= 0) {\n        const currentSquare = grid[y]![x];\n        if (squareCheck({ x, y }, figure) && !currentSquare) {\n          squareCoords.push({ x, y });\n        }\n        if (figure.color === FigureColor.WHITE) {\n          if (currentSquare !== 0) {\n            if (Math.abs(figureDir.x - x) === 1\n            && figureDir.y - y === 1\n            && currentSquare!.color !== figure.color\n            ) {\n              squareCoords.push({ x, y });\n            }\n          }\n        }\n        if (figure.color === FigureColor.BLACK) {\n          if (currentSquare) {\n            if (Math.abs(figureDir.x - x) === 1\n            && y - figureDir.y === 1\n            && currentSquare.color !== figure.color\n            ) {\n              squareCoords.push({ x, y });\n            }\n          }\n        }\n        x += squareDir[i]!.x;\n        y += squareDir[i]!.y;\n      }\n    }\n  }\n  return squareCoords.map((el) => (\n    <Component key={`move-${el.x}-${el.y}`} coords={[el.x, el.y]} />));\n};\n","import { createSlice } from '@reduxjs/toolkit';\nimport { PopupMode } from '../../enums/enums';\nimport { IPopups } from '../../interfaces/interfaces';\n\nconst initialState: IPopups = {\n  isOpen: false,\n  playerNameInput: '',\n  mode: PopupMode.EDIT_NAME\n};\n\nconst popupSlice = createSlice({\n  name: 'popups',\n  initialState,\n  reducers: {\n    setPopup: (state, action) => {\n      state.mode = action.payload.mode;\n      state.isOpen = action.payload.isOpen;\n    },\n    setPlayerInput: (state, action) => {\n      state.playerNameInput = action.payload;\n    }\n  }\n});\nexport const { setPopup, setPlayerInput } = popupSlice.actions;\nexport default popupSlice.reducer;\n","import { useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../../../redux/reducers/index';\nimport './game.style.scss';\nimport Figure from './figure/figure.component';\nimport Square from './square/square.component';\nimport MoveSquare from './move_square/move_square.component';\nimport { FigureColor, GameModes, PopupMode } from '../../../enums/enums';\nimport {\n  generateFigures,\n  generateMoves,\n  generateSquares\n} from './game_utils/game.utils';\nimport { setPopup } from '../../../redux/reducers/popup.state';\n\nfunction Game() {\n  const dispatch = useDispatch();\n  const {\n    chosenFigure, currentMover, grid, winner\n  } = useSelector(\n    (state: RootState) => state.userGrid\n  );\n\n  const { mode, playerColor } = useSelector(\n    (state: RootState) => state.websockets\n  );\n\n  useEffect(() => {\n    if (winner) {\n      dispatch(setPopup({ isOpen: true, mode: PopupMode.SHOW_WINNER }));\n    }\n  }, [winner]);\n\n  const transformRotater = () => {\n    if (mode === GameModes.NETWORK_PVP && playerColor === FigureColor.BLACK) {\n      return 'rotate(0.5turn)';\n    }\n    if (mode === GameModes.LOCAL_PVP && currentMover === FigureColor.BLACK) {\n      return 'rotate(0.5turn)';\n    }\n    return '';\n  };\n\n  const figuresList = useMemo(() => generateFigures(grid, Figure), [grid]);\n\n  const squaresList = generateSquares(grid, Square);\n\n  const canMoveList = useMemo(\n    () => (chosenFigure ? generateMoves(grid, chosenFigure, MoveSquare) : ''),\n    [chosenFigure]\n  );\n  return (\n    <div\n      className=\"grid\"\n      style={{\n        transform: transformRotater()\n      }}\n    >\n      {figuresList}\n      {squaresList}\n      {canMoveList}\n    </div>\n  );\n}\n\nexport default Game;\n","import { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport mover from '../../../assets/mover.png';\nimport { FigureColor, PopupMode } from '../../../enums/enums';\nimport { RootState } from '../../../redux/reducers';\nimport { figuresSVG } from '../game/figure/figures.img';\nimport { chessMark } from '../../../utils/square_directions';\nimport './player.stats.scss';\nimport { timeFormatHandle } from '../../../utils/timer.string-maker';\nimport { setPopup } from '../../../redux/reducers/popup.state';\n\nfunction PlayerStats(props: { color: FigureColor; type: 'player' | 'enemy' }) {\n  const { color, type } = props;\n  const dispatch = useDispatch();\n  const name = useSelector((state: RootState) => state.websockets[type]);\n  const currentMover = useSelector(\n    (state: RootState) => state.userGrid.currentMover\n  );\n  const moves = useSelector((state: RootState) => state.userGrid.moves[color]);\n  const gameCycle = useSelector(\n    (state: RootState) => state.websockets.gameCycle\n  );\n  const isBLack = color === FigureColor.BLACK;\n\n  const movesRender = useMemo(() => {\n    if (gameCycle) {\n      return moves\n        .map((move) => (\n          <div key={JSON.stringify(move)}>\n            <svg\n              viewBox={`${isBLack ? '15' : '-15'} 0 298 298`}\n              className=\"figure\"\n              style={{\n                width: '30px',\n                height: 'auto'\n              }}\n            >\n              <g>{figuresSVG[move.type]!(move.color)}</g>\n            </svg>\n            <span>\n              {chessMark[move.prevPosition[0]]}\n              {move.prevPosition[1] + 1}\n              -\n              {chessMark[move.position[0]]}\n              {move.position[1] + 1}\n            </span>\n          </div>\n        ))\n        .reverse();\n    }\n    return '';\n  }, [moves, gameCycle]);\n\n  const timeRender = useMemo(() => {\n    if (gameCycle) {\n      return moves\n        .map((move) => (\n          <div key={`time-${move.time}`}>\n            <span>{timeFormatHandle(move.time)}</span>\n          </div>\n        ))\n        .reverse();\n    }\n    return '';\n  }, [moves, gameCycle]);\n\n  const currentMoverLabel = useMemo(() => {\n    if (gameCycle) {\n      return (\n        <div\n          className=\"player-mover\"\n          style={{\n            opacity: `${color === currentMover ? '1' : '0'}`\n          }}\n        >\n          <img src={mover} alt=\"mover\" />\n        </div>\n      );\n    }\n    return '';\n  }, [gameCycle, currentMover]);\n  return (\n    <div className=\"player-block\">\n      <div className=\"player-header\">\n        {currentMoverLabel}\n        <span>{name[0]?.toUpperCase()}</span>\n      </div>\n      <div\n        onClick={() => {\n          dispatch(setPopup({ isOpen: true, mode: PopupMode.EDIT_NAME }));\n        }}\n        className=\"player-name\"\n      >\n        {name}\n      </div>\n      <div className=\"player-table\" style={{ opacity: gameCycle ? '1' : '0' }}>\n        <div className=\"move-table\">{movesRender}</div>\n        <div className=\"move-table time-table\">{timeRender}</div>\n      </div>\n    </div>\n  );\n}\n\nexport default PlayerStats;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKYSURBVHgBpZY/aBVBEMa/PQJiIvG/QjAmaCNECRaSQkEhoiCCvYWQQhsLQQW1UEyhFgpqEcRGUBBtBCtFFHxaKkLAwkrylHT+4SFCwBTnN+92k9m5vXsvOvDj7nbnzTc7tzv3HApz/rqaHCUryCx56Mdz4xfuc8Rm/Zwe7zEBJsgN9dwiW0kvWUaWk41+rp+sIxn5Rk6TpklGJ9AW05P9iG07uYbubCfZS76iYtWZEsoTDkuxIRRl703MteNmFVn8q+0mV0y83Gu4DPVCDp3tPfmink+RA0aobRn+z+6TMbKNXFfjF6xQEMtVFtZk+z8nP1Bvf8g50vDPslH2GR9nH4bJC/KKPCYDfnwTimPxGYsbKTDufZwXCeP31HgGVUVnCJMugYg2VVDZ6nL2XpOX/irj82SNibUkIacq8FYJSqnv+PuzZtULsRzKLQjofBTEbxX54IXFjpE95BeZ8zEmbayqFXWz6h1khnwiF9WKnqJcnYWA3ZQuqwgg17uIN82txO/b1klIXvKGGqEJXzot1iBrbazQiKve0WHyAMX7uUnOKP8g2PJzMLH6yE8bsK50DZPx5gq/KRRbPTCY8Ml6kGgrKonb5I3K9nuF3zDiz5V8hGeNT+RgA5wnJ/xzEDuCohfOKz+Z6zO/lwp81ELiZ7/UevKRT0Y36+mEkNiAiTFohXTwqu09jfidHVJ+wWclyv1yKhHLZYkVhSyGyChiO2hWJDaCso3YFcGXMSUkNp4IIi3pMortrm0S8dlrWaFwU3WoZ1AuT2i0wUd251wNJ1UCLtTfZiH/lEaRPhJNLH4kr6LYtSmT1W2BqUKqBeUduOT9xmp8niDRrnLEL12ux8l6pNuY+D7z9+/IfrLL+PxG8bcuahh/AYdyuJcvnSWxAAAAAElFTkSuQmCC\"","const BASE_URL = '//localhost:4000/';\nexport const WS_URL = `ws:${BASE_URL}echo`;\nexport const HTTP_URL = `http:${BASE_URL}replays`;\n\nexport const isJSON = (str:string) => {\n  try {\n    JSON.parse(str);\n  } catch (e) {\n    return false;\n  }\n  return true;\n};\n","import { createSlice } from '@reduxjs/toolkit';\nimport { FigureColor, GameModes } from '../../enums/enums';\nimport { IWebsocketState } from '../../interfaces/interfaces';\n\nconst initialState: IWebsocketState = {\n  gameCycle: false,\n  player: 'Player 1',\n  enemy: 'Player 2',\n  mode: GameModes.LOCAL_PVP,\n  connected: false,\n  readyState: false,\n  socket: null,\n  opponentConnected: false,\n  playerColor: FigureColor.WHITE\n};\n\nconst websocketsSlice = createSlice({\n  name: 'popups',\n  initialState,\n  reducers: {\n    setGameCycle: (state) => {\n      state.gameCycle = !state.gameCycle;\n    },\n    setPlayerName: (state, action) => {\n      state.player = action.payload ? action.payload : state.player;\n    },\n    setOpponentName: (state, action) => {\n      state.enemy = action.payload;\n    },\n    setGameMode: (state, action) => {\n      state.mode = action.payload;\n    },\n    setReadyState: (state, action) => {\n      state.readyState = action.payload;\n    },\n    setConnection: (state, action) => {\n      if (action.payload) {\n        state.connected = true;\n        state.socket = action.payload;\n      } else {\n        state.connected = false;\n        state.socket = null;\n      }\n    },\n    setOpponentConnection: (state, action) => {\n      state.opponentConnected = action.payload;\n      state.readyState = true;\n      state.playerColor = action.payload.your_color;\n      state.enemy = action.payload.enemy_name;\n      state.gameCycle = true;\n    }\n  }\n});\nexport const {\n  setGameCycle,\n  setConnection,\n  setOpponentConnection,\n  setReadyState,\n  setGameMode,\n  setPlayerName,\n  setOpponentName\n} = websocketsSlice.actions;\nexport default websocketsSlice.reducer;\n","import { Dispatch } from 'react';\nimport { SocketEvents } from '../../enums/enums';\nimport { isJSON, WS_URL } from '../../utils/backend_utils';\nimport { } from '../reducers/grid.state';\nimport { setConnection } from '../reducers/network.state';\nimport { websocketMessagesHandler } from './websocket.messages';\n\nexport const setWebsocketConnection = (\n  dispatch: Dispatch<any>, name: string\n) => {\n  const wsConnection = new WebSocket(WS_URL);\n\n  wsConnection.addEventListener('open', () => {\n    wsConnection.send(JSON.stringify(\n      {\n        payload: { event: SocketEvents.CHANGE_NAME, name }\n      }\n    ));\n    dispatch(setConnection(wsConnection));\n  });\n  wsConnection.addEventListener('close', (event) => {\n    if (event.wasClean) {\n      console.log('Соединение закрыто чисто');\n    } else {\n      console.log('Обрыв соединения'); // например, \"убит\" процесс сервера\n    }\n    console.log(`Код: ${event.code} причина: ${event.reason}`);\n    dispatch(setConnection(false));\n  });\n\n  wsConnection.addEventListener('error', (event) => {\n    console.log(event);\n  });\n\n  wsConnection.addEventListener('message', (event) => {\n    console.log(event);\n    if (isJSON(event.data)) {\n      const msg = JSON.parse(event.data);\n      websocketMessagesHandler(dispatch, msg);\n    }\n  });\n};\n","import { Dispatch } from 'react';\nimport { SocketEvents } from '../../enums/enums';\nimport { figureMove, setChosenFigure } from '../reducers/grid.state';\nimport { setOpponentConnection } from '../reducers/network.state';\n\nexport const websocketMessagesHandler = (dispatch: Dispatch<any>, msg: any) => {\n  const { event } = msg;\n  const {\n    MOVE, START, GAME_OWER\n  } = SocketEvents;\n\n  switch (event) {\n    case MOVE:\n      dispatch(setChosenFigure(msg.params.chosenFigure));\n      dispatch(figureMove(msg.params.dir));\n      break;\n    case START:\n      dispatch(setOpponentConnection(msg));\n      break;\n    case GAME_OWER:\n     //\n      break;\n    default:\n      break;\n  }\n};\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { RootState } from '../../../redux/reducers';\nimport { setWebsocketConnection }\n  from '../../../redux/thunks/websockets.thunks';\nimport './menu.style.scss';\nimport { GameModes, SocketEvents } from '../../../enums/enums';\nimport {\n  setReadyState,\n  setGameMode,\n  setGameCycle\n} from '../../../redux/reducers/network.state';\n\nfunction Menu() {\n  const { LOCAL_PVP, NETWORK_PVP } = GameModes;\n  const dispatch = useDispatch();\n  const mode = useSelector((state: RootState) => state.websockets.mode);\n  const playerName = useSelector((state: RootState) => state.websockets.player);\n  const socket = useSelector((state: RootState) => state.websockets.socket);\n  const connected = useSelector(\n    (state: RootState) => state.websockets.connected\n  );\n  const opponent = useSelector(\n    (state: RootState) => state.websockets.opponentConnected\n  );\n  const readyState = useSelector(\n    (state: RootState) => state.websockets.readyState\n  );\n\n  const setStartGame = (): void => {\n    switch (mode) {\n      case NETWORK_PVP:\n        if (connected && opponent) {\n          dispatch(setGameCycle());\n        } else {\n          dispatch(setReadyState('WAIT'));\n          socket?.send(JSON.stringify(\n            { payload: { event: SocketEvents.START } }\n          ));\n        }\n        break;\n      case LOCAL_PVP:\n        dispatch(setGameCycle());\n        break;\n      default:\n        break;\n    }\n  };\n  const viewReplays = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  const isOnlineBtnColor = ({\n    gameMode,\n    conn\n  }: {\n    gameMode: GameModes;\n    conn: boolean;\n  }) => {\n    if (gameMode === NETWORK_PVP && conn) {\n      return '';\n    }\n    if (gameMode === NETWORK_PVP && !conn) {\n      return 'grey';\n    }\n    return '#C38D9D';\n  };\n\n  const setOnline: React.MouseEventHandler<HTMLButtonElement> = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (mode === NETWORK_PVP || socket) {\n      socket?.close(1000, 'работа закончена');\n      dispatch(setGameMode(LOCAL_PVP));\n    } else {\n      setWebsocketConnection(dispatch, playerName);\n      dispatch(setGameMode(NETWORK_PVP));\n    }\n  };\n\n  return (\n    <div className=\"menu\">\n      <NavLink\n        to=\"/game\"\n        onClick={setStartGame}\n        className=\"menu-btn\"\n        style={{\n          backgroundColor:\n          readyState\n          && mode === NETWORK_PVP\n          && connected ? 'grey' : ''\n        }}\n      >\n        <button\n          type=\"button\"\n          onClick={setOnline}\n          className=\"button-online\"\n          style={{\n            backgroundColor: isOnlineBtnColor({\n              gameMode: mode,\n              conn: connected\n            })\n          }}\n        >\n          {mode === NETWORK_PVP ? 'online' : 'offline'}\n        </button>\n        {readyState && mode === NETWORK_PVP && connected ? '...' : 'Start'}\n        <button onClick={viewReplays} type=\"button\" className=\"button-replays\">\n          view replays\n        </button>\n      </NavLink>\n    </div>\n  );\n}\n\nexport default Menu;\n","import { useSelector } from 'react-redux';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport Game from './game/game';\nimport PlayerStats from './player_stats/player.stats';\nimport { FigureColor } from '../../enums/enums';\nimport './main.style.scss';\nimport Menu from './menu/menu';\nimport { RootState } from '../../redux/reducers';\n\nconst { WHITE, BLACK } = FigureColor;\n\nfunction Main() {\n  const { gameCycle } = useSelector((state: RootState) => state.websockets);\n\n  const routes = () => {\n    if (gameCycle) {\n      return (\n        <Switch>\n          <Route path=\"/game\" component={Game} />\n          <Redirect from=\"/\" to=\"/game\" />\n        </Switch>\n      );\n    }\n    return (\n      <Switch>\n        <Route path=\"/\" component={Menu} />\n        <Redirect from=\"/game\" to=\"/\" />\n      </Switch>\n    );\n  };\n  return (\n    <div className=\"main\">\n      <PlayerStats type=\"player\" color={WHITE} />\n      <Switch>\n        <Route exact path=\"/\" component={Menu} />\n        {routes()}\n      </Switch>\n      <PlayerStats type=\"enemy\" color={BLACK} />\n    </div>\n  );\n}\n\nexport default Main;\n","import './footer.style.scss';\n\nfunction Footer() {\n  return (\n    <>\n      <div className=\"footer\">\n        <div className=\"rs-school\">\n          RS School 2021\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Footer;\n","import { useDispatch, useSelector } from 'react-redux';\nimport { SocketEvents } from '../../../enums/enums';\nimport { RootState } from '../../../redux/reducers';\nimport { setPlayerName } from '../../../redux/reducers/network.state';\nimport { setPlayerInput, setPopup } from '../../../redux/reducers/popup.state';\n\nconst NameChange = () => {\n  const inputValue = useSelector(\n    (state: RootState) => state.popup.playerNameInput\n  );\n  const socket = useSelector(\n    (state: RootState) => state.websockets.socket\n  );\n  const dispatch = useDispatch();\n  return (\n    <div onClick={(e) => e.stopPropagation()} className=\"popup-window\">\n      <input\n        className=\"name-placeholder\"\n        value={inputValue}\n        type=\"text\"\n        onChange={(e) => {\n          dispatch(setPlayerInput(e.target.value));\n        }}\n      />\n      <div>player 1</div>\n      <button\n        type=\"button\"\n        className=\"change-btn\"\n        onClick={(e) => {\n          e.preventDefault();\n          e.stopPropagation();\n          dispatch(setPlayerName(inputValue));\n          if (socket) {\n            socket\n              .send(JSON.stringify({\n                payload: {\n                  event: SocketEvents.CHANGE_NAME,\n                  name: inputValue\n                }\n              }));\n          }\n          dispatch(setPopup({ isOpen: false, mode: null }));\n        }}\n      >\n        Change name\n      </button>\n    </div>\n  );\n};\n\nexport default NameChange;\n","const WinnerViewer = () => (\n  <div className=\"popup-window\">\n    <div>Winner</div>\n    <button type=\"button\" className=\"change-btn\">\n      Change name\n    </button>\n  </div>\n);\n\nexport default WinnerViewer;\n","import { useDispatch, useSelector } from 'react-redux';\nimport { PopupMode } from '../../enums/enums';\nimport { RootState } from '../../redux/reducers';\nimport { setPopup } from '../../redux/reducers/popup.state';\nimport NameChange from './NameChanger/NameChanger';\nimport './popup.scss';\nimport WinnerViewer from './WinnerVIewer/WinnerViewer';\n\nfunction Popup() {\n  const isPopup = useSelector((state: RootState) => state.popup.isOpen);\n  const mode = useSelector((state: RootState) => state.popup.mode);\n\n  const dispatch = useDispatch();\n\n  function popupSwitcher() {\n    if (isPopup) {\n      if (mode === PopupMode.EDIT_NAME) {\n        return <NameChange />;\n      }\n      if (mode === PopupMode.SHOW_WINNER) {\n        return <WinnerViewer />;\n      }\n    }\n    return '';\n  }\n\n  return (\n    <>\n      {isPopup ? (\n        <div\n          onClick={() => {\n            dispatch(setPopup({ isPopup: false, mode: null }));\n          }}\n          className=\"popup\"\n        >\n          {popupSwitcher()}\n        </div>\n      ) : (\n        ''\n      )}\n    </>\n  );\n}\n\nexport default Popup;\n","import React from 'react';\nimport './App.css';\nimport Header from './components/header/header';\nimport Main from './components/main/main';\nimport Footer from './components/footer/footer';\nimport Popup from './components/popup/popup';\n\nfunction App() {\n  return (\n    <>\n      <Popup />\n      <Header />\n      <Main />\n      <Footer />\n    </>\n  );\n}\n\nexport default App;\n","import { combineReducers } from 'redux';\nimport userGrid from './grid.state';\nimport websockets from './network.state';\nimport popup from './popup.state';\n\nexport const rootReducer = combineReducers({ userGrid, popup, websockets });\n\nexport type RootState = ReturnType<typeof rootReducer>\n","import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\nimport { rootReducer } from '../reducers/index';\n\nexport const store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunk))\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\nimport { store } from './redux/store/store';\nimport '@fontsource/open-sans';\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <React.StrictMode>\n        <App />\n      </React.StrictMode>\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}